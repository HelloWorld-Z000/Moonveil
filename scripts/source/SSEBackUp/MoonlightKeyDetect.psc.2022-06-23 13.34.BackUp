scriptName MoonlightKeyDetect extends ActiveMagicEffect

spell property SpellRelease auto
spell property SpellReleaseDirection auto
Actor MoonlightActor

Int MKDCount = 0
Float MKDtime = 0.00000

event OnEffectStart(actor akTarget, actor akCaster)
    MoonlightActor = akTarget
    self.RegisterForControl("Left Attack/Block")
    self.RegisterForControl("Right Attack/Block")

endevent

event OnEffectFinish(actor akTarget, actor akCaster)
    MoonlightActor = akTarget
    self.UnRegisterForControl("Left Attack/Block")
    self.UnRegisterForControl("Right Attack/Block")

endevent

event OnControlUp(String Control, Float HoldTime)

    if Control == "Left Attack/Block"
        SpellRelease.Cast(MoonlightActor)
    endIf
    if Control == "Right Attack/Block"
        SpellRelease.Cast(MoonlightActor)
    endIf
endevent
